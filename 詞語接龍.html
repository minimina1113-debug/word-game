<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>äºŒå­—è©èªæ¥é¾æŒ‘æˆ° (æ“´å……èˆ‡å„ªåŒ– V7.0)</title>
    <style>
        /* (æ¨£å¼æ²¿ç”¨ V6.0) */
        :root {
            --primary-color: #E67E22; /* ç«ç„°æ©˜ */
            --accent-color: #E74C3C; /* ç«ç´…è‰² */
            --bg-color: #FFF9E9;
            --font-color: #333;
        }

        body {
            font-family: 'Microsoft JhengHei', Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--font-color);
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            background: white;
            border: 3px solid var(--primary-color);
            border-radius: 15px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.1);
            padding: 30px;
            width: 100%;
            max-width: 500px; 
        }

        h1 {
            color: var(--accent-color);
            text-align: center;
            margin-bottom: 20px;
        }

        /* éŠæˆ²ç‹€æ…‹é¡¯ç¤º */
        #gameStatus {
            background: #FEEEDD;
            color: var(--primary-color);
            padding: 15px;
            border-radius: 10px;
            font-size: 1.2em;
            margin-bottom: 20px;
            text-align: center;
            font-weight: bold;
        }

        /* è¼¸å…¥èˆ‡æ§åˆ¶å€ */
        .input-control {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        #userInput {
            flex-grow: 1;
            padding: 12px;
            font-size: 1.1em;
            border: 2px solid #ccc;
            border-radius: 8px;
            transition: border-color 0.3s;
        }

        #userInput:focus {
            border-color: var(--primary-color);
            outline: none;
        }

        .btn {
            padding: 12px 15px;
            font-size: 1em;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s;
            font-weight: bold;
        }

        .btn-submit {
            background-color: var(--primary-color);
            color: white;
        }

        .btn-submit:hover {
            background-color: #D66D1B;
        }

        .btn-hint {
            background-color: #FFC107;
            color: var(--font-color);
        }

        .btn-hint:hover {
            background-color: #FFA000;
        }

        .btn-start {
            background-color: var(--accent-color);
            color: white;
            width: 100%;
            margin-top: 10px;
        }

        .btn-start:hover {
            background-color: #C0392B;
        }

        /* æ­·å²ç´€éŒ„å€ */
        #historyContainer {
            max-height: 300px;
            overflow-y: auto;
            border: 1px solid #ddd;
            border-radius: 10px;
            padding: 10px;
            background: #fff;
        }

        .history-item {
            padding: 8px 0;
            border-bottom: 1px dotted #eee;
        }

        .history-item:last-child {
            border-bottom: none;
        }

        .word-display {
            font-size: 1.5em;
            font-weight: 900;
            color: var(--accent-color);
        }

        .definition-display {
            font-size: 0.9em;
            color: #666;
            margin-top: 3px;
        }

        .player-turn .word-display {
            color: #2980B9; /* ç©å®¶å‡ºçš„è©èªæ›å€‹è—è‰² */
        }
        
        .computer-turn {
            background-color: #FDF5E6;
            border-radius: 5px;
            padding: 5px 10px;
        }

        /* éŠæˆ²è¨Šæ¯ */
        #message {
            margin-top: 10px;
            min-height: 20px;
            font-weight: bold;
            text-align: center;
        }
        
        .error-msg {
            color: #D32F2F;
        }
        
        .success-msg {
            color: var(--primary-color);
        }
        
    </style>
</head>
<body>

    <div class="container">
        <h1>ğŸ”¥ äºŒå­—è©èªæ¥é¾æŒ‘æˆ° (V7.0) ğŸ”¥</h1>
        
        <div id="gameStatus">è©èªåº«å·²æ“´å……ï¼Œç¾åœ¨ã€Œé‡æ–°é–‹å§‹ã€å°‡æ¸…é™¤éŒ¯èª¤æç¤ºè¨ˆæ•¸ã€‚</div>

        <div class="input-control">
            <input type="text" id="userInput" placeholder="è«‹è¼¸å…¥äºŒå­—è©èª" maxlength="2" disabled>
            <button class="btn btn-submit" id="submitBtn" onclick="checkInput()" disabled>æäº¤</button>
            <button class="btn btn-hint" id="hintBtn" onclick="showHint()" disabled>æç¤º</button>
        </div>

        <div id="message"></div>
        
        <button class="btn btn-start" id="startBtn" onclick="startGame()">â–¶ï¸ ä»¥ã€Œç«ã€å­—é–‹é ­é–‹å§‹</button>

        <h2>æ¥é¾ç´€éŒ„</h2>
        <div id="historyContainer">
            </div>

    </div>

    <script>
        // --- 1. æ“´å……å¾Œçš„äºŒå­—è©èªè³‡æ–™åº« (V7.0) ---
        // ç¸½è©å½™é‡ç´„ 190 å€‹ï¼Œå¢åŠ ã€Œæˆ¿ã€ã€ã€Œè…¿ã€ã€ã€Œç—…ã€ç³»åˆ—ã€‚
        const ACADEMY_DICT = [
            // --- ã€Œç«ã€å­—é–‹é ­ (åŸºç¤èµ·æ‰‹) ---
            { word: "ç«ç½", explanation: "å› ç‡ƒç‡’è€Œé€ æˆç½å®³ã€‚" },
            { word: "ç«é›", explanation: "ä¸€ç¨®é«”å‹è¼ƒå¤§çš„å®¶ç¦½ï¼Œå¸¸åœ¨æ„Ÿæ©ç¯€é£Ÿç”¨ã€‚" },
            { word: "ç«è—¥", explanation: "ç”±ç¡çŸ³ã€ç¡«ç£ºã€æœ¨ç‚­ç­‰è£½æˆçš„çˆ†ç‚¸æ€§ç‰©è³ªã€‚" },
            { word: "ç«è»Š", explanation: "ä»¥åˆ—è»Šæ–¹å¼åœ¨éµè»Œä¸Šè¡Œé§›çš„äº¤é€šå·¥å…·ã€‚" },
            { word: "ç«è…¿", explanation: "è±¬è…¿è‚‰ç¶“é†ƒè£½ã€ç‡»è£½çš„é£Ÿå“ã€‚" },
            { word: "ç«å…‰", explanation: "ç«ç„°ç™¼å‡ºçš„å…‰èŠ’ã€‚" },
            { word: "ç«ç®­", explanation: "åˆ©ç”¨æ¨é€²åŠ‘ç‡ƒç‡’å¾Œç”¢ç”Ÿåä½œç”¨åŠ›è€Œé£›è¡Œçš„å™¨å…·ã€‚" },
            { word: "ç«çˆ", explanation: "ç”Ÿç«å–æš–æˆ–çƒ¹é£ªçš„å™¨å…·ã€‚" },
            { word: "ç«æŠŠ", explanation: "é»ç‡ƒå¾Œç”¨ä¾†ç…§æ˜æˆ–å‚³éè¨Šè™Ÿçš„æ£å­ã€‚" },
            { word: "ç«é‹", explanation: "ä¸€ç¨®å°‡é£Ÿç‰©æ”¾å…¥æ»¾ç‡™æ¹¯æ±ä¸­ç…®ç†Ÿçš„çƒ¹èª¿æ–¹å¼ã€‚" },
            { word: "ç«æ˜Ÿ", explanation: "å¤ªé™½ç³»ä¸­çš„ç¬¬å››é¡†è¡Œæ˜Ÿã€‚" },
            { word: "ç«èŠ±", explanation: "ç‡ƒç‡’æ™‚é£›æ¿ºå‡ºçš„å¾®å°ç«é»ã€‚" },
            
            // --- V7.0 æ–°å¢è©å½™èˆ‡æ¥çºŒè© ---
            
            // æˆ¿ç³»åˆ—
            { word: "æˆ¿é–“", explanation: "æˆ¿å±‹å…§æœ‰ç‰†å£åˆ†éš”çš„ç©ºé–“ã€‚" }, // <-- æ–°å¢
            { word: "æˆ¿å­", explanation: "ä¾›äººå±…ä½çš„å»ºç¯‰ç‰©ã€‚" }, // <-- æ–°å¢
            { word: "æˆ¿å±‹", explanation: "æˆ¿å­çš„ç¸½ç¨±ã€‚" }, // <-- æ–°å¢
            { word: "æˆ¿æ±", explanation: "å‡ºç§Ÿæˆ¿å±‹çš„ä¸»äººã€‚" }, // <-- æ–°å¢
            { word: "æˆ¿å®¢", explanation: "ç§Ÿä½æˆ¿å±‹çš„å®¢äººã€‚" }, // <-- æ–°å¢
            { word: "æˆ¿ç”¢", explanation: "æˆ¿å±‹å’ŒåœŸåœ°ç­‰ä¸å‹•ç”¢ã€‚" }, // <-- æ–°å¢
            { word: "æˆ¿åƒ¹", explanation: "æˆ¿å±‹çš„åƒ¹æ ¼ã€‚" }, // <-- æ–°å¢
            { word: "æˆ¿ç§Ÿ", explanation: "ç§Ÿç”¨æˆ¿å±‹æ‰€éœ€æ”¯ä»˜çš„è²»ç”¨ã€‚" }, // <-- æ–°å¢

            // æ¥ é–“ (å¾ã€Œæˆ¿é–“ã€ä¾†)
            { word: "é–“éš”", explanation: "ä¸­é–“éš”é–‹çš„è·é›¢æˆ–æ™‚é–“ã€‚" }, // <-- æ–°å¢

            // æ¥ å­ (å¾ã€Œæˆ¿å­ã€ä¾†)
            // (é‡è¤‡è©èªå¤šï¼Œç•¥é)

            // æ¥ å±‹ (å¾ã€Œæˆ¿å±‹ã€ä¾†)
            { word: "å±‹é ‚", explanation: "å»ºç¯‰ç‰©æœ€ä¸Šå±¤çš„éƒ¨åˆ†ã€‚" }, // <-- æ–°å¢

            // æ¥ æ± (å¾ã€Œæˆ¿æ±ã€ä¾†)
            { word: "æ±è¥¿", explanation: "æ³›æŒ‡å„ç¨®ç‰©ä»¶ï¼›æˆ–æŒ‡æ–¹å‘çš„æ±é‚Šå’Œè¥¿é‚Šã€‚" }, // <-- æ–°å¢

            // æ¥ å®¢ (å¾ã€Œæˆ¿å®¢ã€ä¾†)
            { word: "å®¢äºº", explanation: "æ‹œè¨ªæˆ–è¢«é‚€è«‹åˆ°å®¶è£¡çš„äººã€‚" }, // <-- æ–°å¢
            
            // æ¥ ç”¢ (å¾ã€Œæˆ¿ç”¢ã€ä¾†)
            { word: "ç”¢å“", explanation: "è£½é€ å‡ºä¾†çš„ç‰©å“ã€‚" }, // <-- æ–°å¢

            // æ¥ åƒ¹ (å¾ã€Œæˆ¿åƒ¹ã€ä¾†)
            { word: "åƒ¹å€¼", explanation: "äº‹ç‰©çš„é‡è¦æ€§æˆ–ç”¨è™•ã€‚" }, // <-- æ–°å¢

            // æ¥ ç§Ÿ (å¾ã€Œæˆ¿ç§Ÿã€ä¾†)
            { word: "ç§Ÿå€Ÿ", explanation: "ç§Ÿç”¨ã€‚" }, // <-- æ–°å¢
            
            // è…¿ç³»åˆ— (æ¥ è…¿)
            { word: "è…¿éƒ¨", explanation: "è…¿çš„éƒ¨ä½ã€‚" }, // <-- æ–°å¢
            { word: "è…¿éª¨", explanation: "è…¿ä¸Šçš„éª¨é ­ã€‚" }, // <-- æ–°å¢
            
            // æ¥ éƒ¨ (å¾ã€Œè…¿éƒ¨ã€ã€ã€Œé ­éƒ¨ã€ä¾†)
            { word: "éƒ¨ä½", explanation: "çµ„æˆæ•´é«”çš„ä¸€éƒ¨åˆ†ã€‚" }, // <-- æ–°å¢
            { word: "éƒ¨é–€", explanation: "æ©Ÿé—œã€åœ˜é«”çš„çµ„ç¹”å–®ä½ã€‚" }, // <-- æ–°å¢
            
            // æ¥ éª¨ (å¾ã€Œè…¿éª¨ã€ã€ã€Œç­‹éª¨ã€ä¾†)
            { word: "éª¨é ­", explanation: "éª¨éª¼çš„ä¿—ç¨±ã€‚" }, // <-- æ–°å¢
            { word: "éª¨æ¶", explanation: "ç‰©é«”çš„ä¸»è¦æ¶æ§‹ã€‚" }, // <-- æ–°å¢
            
            // ç—…ç³»åˆ—
            { word: "ç—…æƒ…", explanation: "ç–¾ç—…ç™¼ç”Ÿå’Œç™¼å±•çš„æƒ…æ³ã€‚" }, // <-- æ–°å¢
            { word: "ç—…æ³", explanation: "ç–¾ç—…çš„ç‹€æ³ã€‚" }, // <-- æ–°å¢
            { word: "ç—…ç¶", explanation: "ç–¾ç—…ç™¼ç”Ÿçš„æ ¹æºæˆ–å±€éƒ¨ç—…è®Šã€‚" }, // <-- æ–°å¢
            
            // æ¥ æ³ (å¾ã€Œç—…æ³ã€ä¾†)
            { word: "æ³ä¸”", explanation: "è¡¨ç¤ºé€²ä¸€æ­¥èªªæ˜æˆ–åŠ å¼·èªæ°£ã€‚" }, // <-- æ–°å¢

            // æ¥ ç¶ (å¾ã€Œç—…ç¶ã€ä¾†)
            { word: "ç¶å°", explanation: "å»šæˆ¿è£¡æ¶è¨­é‹å­çš„åœ°æ–¹ã€‚" },

            // --- å…¶ä»–é—œéµæ¥çºŒè© (å¾ V6.0 ä¿ç•™) ---
            { word: "ç½å®³", explanation: "æ³›æŒ‡å„ç¨®ä¸å¹¸çš„äº‹ä»¶æˆ–ç¦æ‚£ã€‚" },
            { word: "ç½æƒ…", explanation: "ç™¼ç”Ÿç½ç¦çš„æƒ…æ³ã€‚" }, 
            { word: "ç½é›£", explanation: "åš´é‡çš„ç½ç¦ã€‚" }, 
            { word: "æƒ…ç·’", explanation: "å°å¤–ç•Œåˆºæ¿€ç”¢ç”Ÿçš„å¿ƒç†åæ‡‰ã€‚" }, 
            { word: "æƒ…ç¯€", explanation: "æ•…äº‹çš„çµ„æˆéƒ¨åˆ†ã€‚" }, 
            { word: "é›£é¡Œ", explanation: "ä¸å®¹æ˜“è§£æ±ºçš„å•é¡Œã€‚" }, 
            { word: "é›£é“", explanation: "è¡¨ç¤ºåå•èªæ°£ã€‚" }, 
            { word: "èŸ²å­", explanation: "æ˜†èŸ²çš„ä¿—ç¨±ã€‚" },
            { word: "èŸ²å®³", explanation: "èŸ²é¡é€ æˆçš„æå®³ã€‚" }, 
            { word: "èŸ²åµ", explanation: "èŸ²çš„åµã€‚" }, 
            { word: "åµå·¢", explanation: "é›Œæ€§å‹•ç‰©ç”¢ç”Ÿåµå­çš„å™¨å®˜ã€‚" }, 
            { word: "å·¢ç©´", explanation: "é³¥ç¸çš„çª©æˆ–æ´ç©´ã€‚" }, 
            { word: "å¥³å­©", explanation: "å¹´ç´€å°çš„å¥³æ€§ã€‚" }, 
            { word: "å¥³ç”Ÿ", explanation: "å¥³æ€§çš„å­¸ç”Ÿã€‚" }, 
            { word: "å¥³æ€§", explanation: "èˆ‡ç”·æ€§ç›¸å°çš„æ€§åˆ¥ã€‚" }, 
            { word: "å¥³äºº", explanation: "æˆå¹´å¥³æ€§ã€‚" }, 
            { word: "å¥³å­", explanation: "å¥³æ€§çš„çµ±ç¨±ã€‚" }, 
            { word: "å¥³è£", explanation: "å¥³æ€§ç©¿è‘—çš„æœé£¾ã€‚" }, 
            { word: "å¥³åƒ•", explanation: "å¾äº‹å®¶å‹™çš„å¥³æ€§å‚­äººã€‚" }, 
            { word: "å¥³ç´…", explanation: "èˆŠæ™‚å©¦å¥³æ‰€åšçš„é‡ç·šæ´»ã€‚" }, 
            { word: "å­©ç«¥", explanation: "å…’ç«¥ã€‚" }, 
            { word: "ç”Ÿæ´»", explanation: "ç”Ÿå­˜æ´»å‹•ã€‚" }, 
            { word: "ç”Ÿæ—¥", explanation: "å‡ºç”Ÿçš„æ—¥å­ã€‚" }, 
            { word: "æ€§æ ¼", explanation: "å€‹äººç‰¹æœ‰çš„æ€æƒ³ã€è¡Œç‚ºæ¨¡å¼ã€‚" }, 
            { word: "æ€§åˆ¥", explanation: "ç”Ÿç†ä¸Šå€åˆ†ç”·å¥³çš„ç‰¹å¾µã€‚" }, 
            { word: "äººç‰©", explanation: "æ³›æŒ‡äººæˆ–è§’è‰²ã€‚" },
            { word: "äººæ°‘", explanation: "åœ‹å®¶æˆ–åœ°å€çš„å±…æ°‘ã€‚" }, 
            { word: "å­å­«", explanation: "å…’å­å’Œå­«å­ã€‚" }, 
            { word: "è£é£¾", explanation: "é»ç¶´ã€ç¾åŒ–ã€‚" }, 
            { word: "åƒ•äºº", explanation: "åœ¨ä¸»äººå®¶è£¡æœä¾çš„äººã€‚" }, 
            { word: "ç´…è‰²", explanation: "åƒè¡€ä¸€æ¨£çš„é¡è‰²ã€‚" }, 
            { word: "ç·šç´¢", explanation: "äº‹æƒ…çš„è·¡è±¡æˆ–é ­ç·’ã€‚" },
            { word: "ç·šæ¢", explanation: "ç¾è¡“ä¸Šçš„ç”¨èªï¼ŒæŒ‡ç‰©é«”è¼ªå»“çš„ç·šã€‚" }, 
            { word: "ç·šé¦™", explanation: "æ‹œæ‹œæˆ–è–°é¦™ç”¨çš„ç´°é•·é¦™æã€‚" }, 
            { word: "ç·šè·¯", explanation: "é›»æµé€šéçš„å°ç·šæˆ–è·¯å¾‘ã€‚" }, 
            { word: "ç·šåœˆ", explanation: "å°ç·šçºç¹æˆèºæ—‹ç‹€çš„ç‰©é«”ã€‚" }, 
            { word: "æ¢ç´‹", explanation: "æ¢ç‹€çš„ç´‹è·¯ã€‚" }, 
            { word: "é¦™æ°£", explanation: "èŠ³é¦™çš„å‘³é“ã€‚" }, 
            { word: "åœˆå­", explanation: "åœ“å½¢ç¯„åœæˆ–ç‰¹å®šçš„ç¤¾äº¤ç¾¤é«”ã€‚" }, 
            { word: "ç‡ˆå…‰", explanation: "ç‡ˆç™¼å‡ºçš„å…‰èŠ’ã€‚" }, 
            { word: "ç‡ˆæ³¡", explanation: "ç™¼å…‰ç…§æ˜çš„ç»ç’ƒæ³¡ã€‚" }, 
            { word: "å‘³é“", explanation: "é£Ÿç‰©åšèµ·ä¾†çš„æ„Ÿè¦ºã€‚" }, 
            { word: "æ³¡æ²«", explanation: "æ¶²é«”è¡¨é¢å½¢æˆçš„æ°£æ³¡ã€‚" }, 
            { word: "æœ«æ—¥", explanation: "ä¸–ç•Œçš„çµ‚çµä¹‹æ—¥ã€‚" }, 
            { word: "æœ«ç«¯", explanation: "ç‰©é«”çš„ç›¡é ­æˆ–é‚Šç·£ã€‚" }, 
            { word: "é›è›‹", explanation: "æ¯é›æ‰€ç”¢çš„åµã€‚" },
            { word: "è—¥ç‰©", explanation: "ç”¨æ–¼é†«ç™‚ã€é é˜²ã€è¨ºæ–·ç–¾ç—…çš„ç‰©è³ªã€‚" },
            { word: "è—¥æ°´", explanation: "æ¶²æ…‹çš„è—¥åŠ‘ã€‚" },
            { word: "è»Šè¼›", explanation: "å„ç¨®è»Šå­çš„ç¸½ç¨±ã€‚" },
            { word: "è»Šè¼ª", explanation: "è»Šå­ç”¨ä¾†æ»¾å‹•çš„åœ“å½¢æ©Ÿä»¶ã€‚" },
            { word: "è»Šç¦", explanation: "è»Šè¼›ç™¼ç”Ÿæ„å¤–ã€‚" },
            { word: "è»Šåº«", explanation: "åœæ”¾è»Šè¼›çš„å ´æ‰€ã€‚" },
            { word: "è»Šå»‚", explanation: "ç«è»Šã€æ±½è»Šç­‰è¼‰å®¢æˆ–è¼‰ç‰©çš„éƒ¨åˆ†ã€‚" },
            { word: "è»Šé ­", explanation: "è»Šè¼›æœ€å‰é¢çš„éƒ¨åˆ†ã€‚" },
            { word: "è»Šé“", explanation: "ä¾›è»Šè¼›è¡Œé§›çš„é“è·¯ã€‚" },
            { word: "è…¿æ¯›", explanation: "ç”Ÿé•·åœ¨è…¿éƒ¨çš„æ¯›é«®ã€‚" },
            { word: "è…¿è‚š", explanation: "å°è…¿å¾Œé¢çš„è‚Œè‚‰éš†èµ·è™•ã€‚" },
            { word: "å…‰æ˜", explanation: "å…‰äº®ã€æœ‰å¸Œæœ›ã€‚" },
            { word: "å…‰ç·š", explanation: "ç™¼å…‰çš„ç‰©é«”æ‰€æ•£ç™¼å‡ºçš„å…‰æ³¢ã€‚" },
            { word: "ç®­é ­", explanation: "ç®­çš„å‰ç«¯éƒ¨åˆ†ã€‚" },
            { word: "çˆç¶", explanation: "ç”Ÿç«ç…®é£Ÿçš„è¨­å‚™ã€‚" },
            { word: "æŠŠæ¡", explanation: "æŠ“ä½ã€æŒæ¡ã€‚" },
            { word: "æ˜Ÿçƒ", explanation: "å®‡å®™ä¸­çš„å¤©é«”ã€‚" },
            { word: "æ˜ŸæœŸ", explanation: "ä»¥ä¸ƒå¤©ç‚ºä¸€é€±æœŸçš„æ™‚é–“å–®ä½ã€‚" },
            { word: "èŠ±è‰", explanation: "èŠ±çš„æ¤ç‰©å’Œè‰æœ¬æ¤ç‰©çš„ç¸½ç¨±ã€‚" },
            { word: "èŠ±è²»", explanation: "æ”¯å‡ºé‡‘éŒ¢ã€‚" },
            { word: "å®³èŸ²", explanation: "å°äººé¡æœ‰å®³çš„æ˜†èŸ²ã€‚" },
            { word: "å®³æ€•", explanation: "å¿ƒç†ç”¢ç”Ÿææ‡¼ã€‚" },
            { word: "è›‹ç™½", explanation: "è›‹é»ƒå‘¨åœé€æ˜çš„æ¶²é«”éƒ¨åˆ†ã€‚" },
            { word: "ç™½è‰²", explanation: "åƒé›ªæˆ–ç‰›å¥¶çš„é¡è‰²ã€‚" },
            { word: "ç™½é£¯", explanation: "ç…®ç†Ÿçš„ç±³é£¯ã€‚" },
            { word: "ç‰©å“", explanation: "æ³›æŒ‡å„ç¨®å™¨ç‰©ã€æ±è¥¿ã€‚" },
            { word: "ç‰©è³ª", explanation: "æ§‹æˆå®‡å®™è¬ç‰©çš„å¯¦é«”ã€‚" },
            { word: "è³ªé‡", explanation: "ç‰©é«”å…§å«ç‰©è³ªçš„é‡ã€‚" },
            { word: "æ°´ç½", explanation: "å› æ°´æ‚£é€ æˆçš„ç½å®³ã€‚" },
            { word: "æ°´æœ", explanation: "å¤šæ±ä¸”å‘³ç”œå¯é£Ÿçš„æ¤ç‰©æœå¯¦ã€‚" },
            { word: "æ°´é¢", explanation: "æ°´é«”çš„è¡¨é¢ã€‚" },
            { word: "è¼ªèˆ¹", explanation: "é è¼ªæ©Ÿç™¼å‹•çš„èˆ¹éš»ã€‚" },
            { word: "è¼ªèƒ", explanation: "å¥—åœ¨è»Šè¼ªå¤–å±¤çš„æ©¡è† åœˆã€‚" },
            { word: "ç¦å®³", explanation: "ç½ç¦ã€æå®³ã€‚" },
            { word: "æ¯›ç—…", explanation: "ç¼ºé»ã€å°å•é¡Œã€‚" },
            { word: "æ¯›å·¾", explanation: "å¸æ°´æ€§å¥½çš„æ£‰ç¹”å“ã€‚" },
            { word: "è‚šå­", explanation: "è…¹éƒ¨çš„ä¿—ç¨±ã€‚" },
            { word: "è‚šè‡", explanation: "è…¹éƒ¨ä¸­å¤®å‡¹é™·è™•ã€‚" },
            { word: "è‡å¸¶", explanation: "é€£æ¥èƒå…’èˆ‡æ¯é«”çš„å¸¶ç‹€ç‰©ã€‚" },
            { word: "æ˜ç™½", explanation: "æ¸…æ¥šã€äº†è§£ã€‚" },
            { word: "æ˜å¤©", explanation: "ä»Šæ—¥ä¹‹å¾Œçš„ä¸€å¤©ã€‚" },
            { word: "é ­éƒ¨", explanation: "èº«é«”æœ€ä¸Šé¢çš„éƒ¨åˆ†ã€‚" },
            { word: "é ­è…¦", explanation: "æ¯”å–»æ€è€ƒèƒ½åŠ›ã€‚" },
            { word: "é ­ç—›", explanation: "é ­éƒ¨ç–¼ç—›ã€‚" },
            { word: "é ­çš®", explanation: "é ­ä¸Šçš„çš®è†šã€‚" },
            { word: "è…¦è¢‹", explanation: "é ­éƒ¨çš„ä¿—ç¨±ã€‚" },
            { word: "è…¦ç­‹", explanation: "æ¯”å–»æ€ç¶­ã€æ™ºæ…§ã€‚" },
            { word: "è…¦åŠ›", explanation: "æ€è€ƒçš„èƒ½åŠ›ã€‚" },
            { word: "ç­‹éª¨", explanation: "è‚Œè‚‰å’Œéª¨éª¼ã€‚" },
            { word: "ç—›å¿«", explanation: "æš¢å¿«ã€èˆ’æœã€‚" },
            { word: "ç—›è‹¦", explanation: "èº«é«”æˆ–ç²¾ç¥ä¸Šçš„é›£å—ã€‚" },
            { word: "è‹¦ç“œ", explanation: "ä¸€ç¨®å‘³é“è‹¦æ¾€çš„ç“œé¡è”¬èœã€‚" },
            { word: "è‹¦é›£", explanation: "è‰±é›£å›°è‹¦ã€‚" },
            { word: "å¿«æ¨‚", explanation: "å¿ƒæƒ…æ„‰æ‚…ã€‚" },
            { word: "æ¨‚è§€", explanation: "å°äº‹ç‰©æŠ±æŒç©æ¥µé–‹æœ—çš„æ…‹åº¦ã€‚" },
            { word: "æ¨‚å™¨", explanation: "ç”¨ä¾†æ¼”å¥éŸ³æ¨‚çš„å™¨å…·ã€‚" },
            { word: "è§€å¿µ", explanation: "å°äº‹ç‰©çš„çœ‹æ³•ã€æƒ³æ³•ã€‚" },
            { word: "å™¨å®˜", explanation: "ç”Ÿç‰©é«”å…§æœ‰ç‰¹å®šåŠŸèƒ½çš„æ§‹é€ ã€‚" },
            { word: "ç±³é£¯", explanation: "ç…®ç†Ÿçš„ç±³é£¯ã€‚" },
            { word: "èˆ¹éš»", explanation: "èˆ¹çš„ç¸½ç¨±ã€‚" },
            { word: "éš»èº«", explanation: "å–®ç¨ä¸€äººã€‚" },
            { word: "èƒå…’", explanation: "å°šæœªå‡ºç”Ÿçš„å¬°å…’ã€‚" },
            { word: "æ˜Ÿå…‰", explanation: "æ˜Ÿæ˜Ÿç™¼å‡ºçš„å¾®å¼±å…‰èŠ’ã€‚" },
            { word: "æ¡æ‰‹", explanation: "ä»¥æ‰‹äº¤æ¡ï¼Œè¡¨ç¤ºå‹å¥½æˆ–ç¥è³€ã€‚" },
            { word: "æ‰‹æ©Ÿ", explanation: "è¡Œå‹•é›»è©±ã€‚" },
            { word: "æ‰‹é›»", explanation: "æ‰‹é›»ç­’çš„ç°¡ç¨±ã€‚" },
            { word: "æ©Ÿæœƒ", explanation: "æœ‰åˆ©çš„æ™‚æ©Ÿã€‚" },
            { word: "é‹å­", explanation: "çƒ¹é£ªç”¨çš„å™¨å…·ã€‚" },
            { word: "å­å¥³", explanation: "å…’å¥³çš„ç¸½ç¨±ã€‚" },
            { word: "å­å½ˆ", explanation: "æ§ç ²ç™¼å°„çš„å½ˆé ­ã€‚" },
            { word: "å½ˆç°§", explanation: "å…·æœ‰å½ˆæ€§ï¼Œå¯ä»¥å„²å­˜èƒ½é‡çš„å…ƒä»¶ã€‚" },
            { word: "å¥³å…’", explanation: "å¥³æ€§çš„å­©å­ã€‚" },
            { word: "å…’æ­Œ", explanation: "å…’ç«¥å”±çš„æ­Œæ›²ã€‚" },
            { word: "æ­Œæ›²", explanation: "èƒ½æ¼”å”±çš„æ¨‚æ›²ã€‚" },
            { word: "æ›²ç·š", explanation: "ä¸ç›´çš„ç·šæ¢ã€‚" },
            { word: "æœŸæœ›", explanation: "æ®·åˆ‡ç›¼æœ›ã€‚" },
            { word: "è²»ç”¨", explanation: "éœ€è¦æ”¯ä»˜çš„éŒ¢ã€‚" },
            { word: "æœ›é ", explanation: "å‘é è™•çœ‹ã€‚" },
            { word: "é æ–¹", explanation: "è·é›¢è¼ƒé çš„åœ°æ–¹ã€‚" },
            { word: "æ–¹é¢", explanation: "äº‹æƒ…çš„æŸä¸€éƒ¨åˆ†ã€‚" },
            { word: "é¢å…·", explanation: "é®è“‹è‡‰éƒ¨çš„ç”¨å…·ã€‚" },
            { word: "å…·é«”", explanation: "æœ‰å¯¦é«”æˆ–å¯¦ç‰©å½¢æ…‹çš„ã€‚" },
            { word: "é«”åŠ›", explanation: "èº«é«”çš„åŠ›é‡ã€‚" },
            { word: "èº«é«”", explanation: "äººæˆ–å‹•ç‰©çš„è»€é«”ã€‚" },
            { word: "èº«æ", explanation: "èº«é«”çš„é«˜çŸ®ã€èƒ–ç˜¦å’Œæ¯”ä¾‹ã€‚" },
            { word: "èº«å¿ƒ", explanation: "èº«é«”å’Œå¿ƒéˆã€‚" },
            { word: "èº«æ•™", explanation: "ä»¥è‡ªèº«çš„è¡Œç‚ºä½œç‚ºæ¦œæ¨£ä¾†æ•™å°ã€‚" },
            { word: "é«”è‚²", explanation: "é—œæ–¼èº«é«”æ´»å‹•çš„æ•™è‚²æˆ–é‹å‹•ã€‚" },
            { word: "é«”é‡", explanation: "èº«é«”çš„é‡é‡ã€‚" },
            { word: "ææ–™", explanation: "è£½ä½œç‰©å“æ‰€éœ€çš„ç‰©è³‡ã€‚" },
            { word: "å¿ƒæƒ…", explanation: "å…§å¿ƒçš„æ„Ÿå—ç‹€æ…‹ã€‚" },
            { word: "å¿ƒè‡Ÿ", explanation: "å¾ªç’°ç³»çµ±ä¸­æ¨å‹•è¡€æ¶²æµå‹•çš„å™¨å®˜ã€‚" },
            { word: "æ•™å­¸", explanation: "æ•™å¸«å‚³æˆçŸ¥è­˜å’ŒæŠ€èƒ½ã€‚" },
            { word: "é‡è¦", explanation: "æœ‰åƒ¹å€¼æˆ–æœ‰å½±éŸ¿åŠ›ã€‚" },
            { word: "æ–™å­", explanation: "å¸ƒæ–™çš„ä¿—ç¨±ã€‚" },
            { word: "é«’äº‚", explanation: "ä¸æ•´æ½”ï¼Œæ··äº‚ã€‚" },
            { word: "åº«å­˜", explanation: "å€‰åº«ä¸­å„²å­˜çš„ç‰©è³‡ã€‚" },
            { word: "å»‚æˆ¿", explanation: "æ­£æˆ¿å…©å´çš„æˆ¿å±‹ã€‚" },
            { word: "é“è·¯", explanation: "ä¾›äººè»Šé€šè¡Œçš„è·¯ã€‚" },
            { word: "è·¯ç‡ˆ", explanation: "æ¶è¨­åœ¨è·¯é‚Šç…§æ˜çš„ç‡ˆã€‚" },
            { word: "è·¯å£", explanation: "é“è·¯äº¤æœƒçš„åœ°æ–¹ã€‚" }, // <-- æ–°å¢ï¼Œæ¥ã€Œå£ã€
            { word: "ç”Ÿæ—¥", explanation: "å‡ºç”Ÿçš„æ—¥å­ã€‚" },
            { word: "ç”Ÿæ´»", explanation: "ç”Ÿå­˜æ´»å‹•ã€‚" },
            { word: "æ€§æ ¼", explanation: "å€‹äººç‰¹æœ‰çš„æ€æƒ³ã€è¡Œç‚ºæ¨¡å¼ã€‚" },
            { word: "æ€§åˆ¥", explanation: "ç”Ÿç†ä¸Šå€åˆ†ç”·å¥³çš„ç‰¹å¾µã€‚" },
            { word: "äººæ°‘", explanation: "åœ‹å®¶æˆ–åœ°å€çš„å±…æ°‘ã€‚" },
        ];

        // --- 2. éŠæˆ²ç‹€æ…‹è®Šæ•¸ ---
        let isGameStarted = false;
        let lastWord = ""; 
        let history = []; 
        let availableDict = []; 
        let errorCount = 0; // è¿½è¹¤é€£çºŒè¼¸å…¥éŒ¯èª¤çš„æ¬¡æ•¸

        // --- 3. DOM å…ƒç´ ç²å– ---
        const statusEl = document.getElementById('gameStatus');
        const userInputEl = document.getElementById('userInput');
        const submitBtn = document.getElementById('submitBtn');
        const hintBtn = document.getElementById('hintBtn');
        const startBtn = document.getElementById('startBtn');
        const historyContainer = document.getElementById('historyContainer');
        const messageEl = document.getElementById('message');

        // --- 4. éŠæˆ²æµç¨‹æ§åˆ¶ ---

        function startGame() {
            isGameStarted = true;
            history = [];
            errorCount = 0; // V7.0 å„ªåŒ–ï¼šé‡ç½®éŒ¯èª¤è¨ˆæ•¸
            
            const fireWords = ACADEMY_DICT.filter(item => item.word.startsWith("ç«"));
            availableDict = [...ACADEMY_DICT]; 

            historyContainer.innerHTML = '';
            messageEl.textContent = '';
            userInputEl.value = '';
            
            if (fireWords.length === 0) {
                 statusEl.innerHTML = 'éŒ¯èª¤ï¼šå­—å…¸ä¸­æ²’æœ‰ä»¥ã€Œç«ã€å­—é–‹é ­çš„è©èªï¼';
                 return;
            }

            userInputEl.disabled = false;
            submitBtn.disabled = false;
            hintBtn.disabled = false;
            startBtn.textContent = 'ğŸ”„ é‡æ–°é–‹å§‹ (ä»¥ã€Œç«ã€å­—é–‹é ­)';
            
            statusEl.innerHTML = 'éŠæˆ²é–‹å§‹ï¼é›»è…¦æ­£åœ¨ä»¥ã€Œç«ã€å­—å‡ºé¡Œ...';
            computerMove(true, fireWords); 
        }

        /**
         * é›»è…¦å‡ºé¡Œ (æ²¿ç”¨ V4.0 çš„å„ªåŒ–ç­–ç•¥)
         */
        function computerMove(isFirstMove = false, firstMoveDict = null) {
            let nextWordObj;
            let currentDict = isFirstMove ? firstMoveDict : availableDict;

            if (isFirstMove) {
                const randomIndex = Math.floor(Math.random() * currentDict.length);
                nextWordObj = currentDict[randomIndex];
            } else {
                const requiredChar = lastWord.slice(-1); 
                
                let candidates = currentDict.filter(item => 
                    item.word.startsWith(requiredChar) 
                );

                if (candidates.length === 0) {
                    endGame('ç©å®¶è´äº†ï¼é›»è…¦è©çª®äº†ï¼Œå¤ªå²å®³äº†ï¼');
                    return;
                }
                
                // ç¯©é¸å®‰å…¨è©ï¼šç¢ºä¿ä¸‹ä¸€è¼ªé‚„æœ‰è©å¯æ¥
                let safeCandidates = candidates.filter(candidate => {
                    const nextRequiredChar = candidate.word.slice(-1);
                    const nextPossibleWords = availableDict.filter(item => 
                        item.word.startsWith(nextRequiredChar) && item.word !== candidate.word
                    );
                    return nextPossibleWords.length > 0;
                });
                
                let selectionPool = safeCandidates.length > 0 ? safeCandidates : candidates;

                const randomIndex = Math.floor(Math.random() * selectionPool.length);
                nextWordObj = selectionPool[randomIndex];
            }
            
            lastWord = nextWordObj.word;
            
            availableDict = availableDict.filter(item => item.word !== lastWord);

            addHistory(lastWord, nextWordObj.explanation, 'computer-turn');
            
            const requiredChar = lastWord.slice(-1);
            statusEl.innerHTML = `è«‹æ¥é¾ï¼š<span style="color:var(--accent-color); font-size:1.3em;">${lastWord}</span>ï¼Œé¦–å­—ç‚ºã€Œ<span style="font-size:1.5em; color:var(--primary-color);">**${requiredChar}**</span>ã€`;
            messageEl.textContent = 'ç¾åœ¨è¼ªåˆ°ä½ æ¥é¾äº†ï¼';
            userInputEl.focus();
        }

        /**
         * ç©å®¶æäº¤è¼¸å…¥ä¸¦æª¢æŸ¥
         */
        function checkInput() {
            if (!isGameStarted || userInputEl.disabled) return;
            
            const playerInput = userInputEl.value.trim();
            messageEl.textContent = '';

            if (playerInput.length !== 2) {
                displayMessage('âŒ è«‹è¼¸å…¥äºŒå­—è©èªã€‚', 'error-msg');
                errorCount = 0; 
                return;
            }

            const inputWordObj = ACADEMY_DICT.find(item => item.word === playerInput);
            
            // 1. æª¢æŸ¥æ˜¯å¦ç‚ºè©åº«ä¸­çš„è©
            if (!inputWordObj) {
                displayMessage(`âŒ ã€Œ${playerInput}ã€ä¸åœ¨è©èªåº«ä¸­ã€‚`, 'error-msg');
                errorCount++;
                checkErrorTip(); 
                return;
            }

            // 2. æª¢æŸ¥æ˜¯å¦å·²ç¶“å‡ºé
            if (!availableDict.some(item => item.word === playerInput)) {
                displayMessage(`âŒ ã€Œ${playerInput}ã€å·²ç¶“è¢«ä½¿ç”¨éäº†ã€‚`, 'error-msg');
                errorCount++;
                checkErrorTip(); 
                return;
            }

            const requiredChar = lastWord.slice(-1);
            
            // 3. æª¢æŸ¥æ¥é¾è¦å‰‡
            if (playerInput.charAt(0) !== requiredChar) {
                displayMessage(`âŒ é¦–å­—å¿…é ˆæ˜¯ã€Œ${requiredChar}ã€ï¼`, 'error-msg');
                errorCount++;
                checkErrorTip(); 
                return;
            }

            // æˆåŠŸæ¥é¾
            errorCount = 0; // æˆåŠŸå¾Œé‡ç½®éŒ¯èª¤è¨ˆæ•¸
            lastWord = playerInput;
            availableDict = availableDict.filter(item => item.word !== lastWord);

            addHistory(lastWord, inputWordObj.explanation, 'player-turn');
            userInputEl.value = '';
            displayMessage('âœ… æ¥é¾æˆåŠŸï¼æ›é›»è…¦å‡ºé¡Œã€‚', 'success-msg');
            
            setTimeout(computerMove, 1000); 
        }
        
        /**
         * æª¢æŸ¥é€£çºŒè¼¸å…¥éŒ¯èª¤ï¼Œä¸¦çµ¦äºˆéš¨æ©Ÿæç¤º 
         */
        function checkErrorTip() {
            // V7.0: æª¢æŸ¥ errorCount æ˜¯å¦åœ¨ startGame() ä¸­è¢«é‡è¨­ï¼Œç¢ºä¿é‡ä¾†æ™‚æ²’æœ‰èˆŠçš„è¨ˆæ•¸ã€‚
            if (errorCount >= 2) {
                const requiredChar = lastWord.slice(-1);
                const candidates = availableDict.filter(item => 
                    item.word.startsWith(requiredChar) 
                );
                
                if (candidates.length > 0) {
                    const randomIndex = Math.floor(Math.random() * candidates.length);
                    const hintWord = candidates[randomIndex].word;
                    
                    displayMessage(`ğŸš¨ é€£çºŒéŒ¯èª¤ï¼æç¤ºä¸€çµ„æ­£ç¢ºç­”æ¡ˆï¼š<span style="color:#00796B;">**${hintWord}**</span>`, 'error-msg');
                }
                errorCount = 0; 
            }
        }

        /**
         * é¡¯ç¤ºæç¤º (æ‰‹å‹•é»æ“Š) 
         */
        function showHint() {
            if (!isGameStarted || userInputEl.disabled) return;
            
            const requiredChar = lastWord.slice(-1);
            
            const candidates = availableDict.filter(item => 
                item.word.startsWith(requiredChar) 
            );

            if (candidates.length === 0) {
                displayMessage('ğŸ’¡ æç¤ºï¼šç›®å‰æ²’æœ‰è©èªå¯ä»¥æ¥é¾äº†ï¼', 'error-msg');
                return;
            }

            const maxHints = Math.min(candidates.length, 3);
            const shuffled = candidates.sort(() => 0.5 - Math.random());
            const selectedHints = shuffled.slice(0, maxHints);
            
            let hintText = `ğŸ’¡ æç¤ºï¼šå¯æ¥ã€Œ**${requiredChar}**ã€é–‹é ­çš„è©èªï¼Œä¾‹å¦‚ï¼š`;
            selectedHints.forEach((item, index) => {
                hintText += (index > 0 ? 'ã€' : '') + item.word;
            });

            displayMessage(hintText, 'success-msg');
        }

        /**
         * çµæŸéŠæˆ²
         */
        function endGame(finalMessage) {
            isGameStarted = false;
            userInputEl.disabled = true;
            submitBtn.disabled = true;
            hintBtn.disabled = true;
            
            const score = history.length;
            statusEl.innerHTML = `**éŠæˆ²çµæŸï¼** ${finalMessage} <br>å…±æ¥é¾ **${score}** å€‹è©èªã€‚`;
            displayMessage(`ğŸ† ä½ çš„æœ€çµ‚åˆ†æ•¸æ˜¯ï¼š${score}`, 'success-msg');
        }

        // --- 5. ä»‹é¢æ›´æ–° ---
        
        function addHistory(word, explanation, turnClass) {
            history.push({ word, explanation, turnClass });
            
            const newItem = document.createElement('div');
            newItem.className = `history-item ${turnClass}`;
            newItem.innerHTML = `
                <div class="word-display">${word}</div>
                <div class="definition-display">é‡‹ç¾©ï¼š${explanation}</div>
            `;
            
            historyContainer.insertBefore(newItem, historyContainer.firstChild);

            if (historyContainer.scrollTop > 0) {
                historyContainer.scrollTop = 0; 
            }
        }
        
        function displayMessage(text, className = '') {
            messageEl.className = className;
            messageEl.innerHTML = text.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
        }
        
        userInputEl.addEventListener('keypress', function(event) {
            if (event.key === 'Enter') {
                checkInput();
            }
        });

        window.onload = function() {
            statusEl.innerHTML = 'V7.0 æ›´æ–°å®Œæˆï¼šè©èªåº«å·²æ“´å……ï¼Œä¸”é‡å•ŸéŠæˆ²å°‡æ¸…é™¤æ‰€æœ‰è¨ˆæ•¸ã€‚';
        };

    </script>
</body>
</html>